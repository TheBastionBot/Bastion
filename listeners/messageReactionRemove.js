const a177_0x45f2=['remove','Constants','messageReactionRemove','../utils/emojis','tag','unpin','handleReactionPinning','exec','partial','catch','_id','Removed\x20via\x20Reaction\x20Roles','constructor','MANAGE_MESSAGES','parseEmoji','emoji','guild','handleReactionRoles','getDocument','map','default','../models/Role','findById','member','test','name','return\x20/\x22\x20+\x20this\x20+\x20\x22/','Pin\x20reaction\x20removed\x20by\x20','fetch','message','reactionPinning','user'];(function(_0x5d0130,_0x45f2c4){const _0x59a9f3=function(_0x5a8a62){while(--_0x5a8a62){_0x5d0130['push'](_0x5d0130['shift']());}},_0x17dc42=function(){const _0x3004c6={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x511520,_0x5c7523,_0x34657e,_0x3f5af6){_0x3f5af6=_0x3f5af6||{};let _0x25183c=_0x5c7523+'='+_0x34657e,_0x5c9028=0x0;for(let _0x42d641=0x0,_0xd87b54=_0x511520['length'];_0x42d641<_0xd87b54;_0x42d641++){const _0x549d1c=_0x511520[_0x42d641];_0x25183c+=';\x20'+_0x549d1c;const _0x2aa08e=_0x511520[_0x549d1c];_0x511520['push'](_0x2aa08e),_0xd87b54=_0x511520['length'],_0x2aa08e!==!![]&&(_0x25183c+='='+_0x2aa08e);}_0x3f5af6['cookie']=_0x25183c;},'removeCookie':function(){return'dev';},'getCookie':function(_0xdf044d,_0x1e87d1){_0xdf044d=_0xdf044d||function(_0x4eac6f){return _0x4eac6f;};const _0x1aed4c=_0xdf044d(new RegExp('(?:^|;\x20)'+_0x1e87d1['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x20a17f=function(_0x5e01b1,_0x3583cb){_0x5e01b1(++_0x3583cb);};return _0x20a17f(_0x59a9f3,_0x45f2c4),_0x1aed4c?decodeURIComponent(_0x1aed4c[0x1]):undefined;}},_0x2972d7=function(){const _0x55a46c=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x55a46c['test'](_0x3004c6['removeCookie']['toString']());};_0x3004c6['updateCookie']=_0x2972d7;let _0xce55f='';const _0x5468af=_0x3004c6['updateCookie']();if(!_0x5468af)_0x3004c6['setCookie'](['*'],'counter',0x1);else _0x5468af?_0xce55f=_0x3004c6['getCookie'](null,'counter'):_0x3004c6['removeCookie']();};_0x17dc42();}(a177_0x45f2,0x1eb));const a177_0x59a9=function(_0x5d0130,_0x45f2c4){_0x5d0130=_0x5d0130-0x0;let _0x59a9f3=a177_0x45f2[_0x5d0130];return _0x59a9f3;};const a177_0x3004c6=function(){let _0xce55f=!![];return function(_0x5468af,_0x511520){const _0x5c7523=_0xce55f?function(){if(_0x511520){const _0x34657e=_0x511520['apply'](_0x5468af,arguments);return _0x511520=null,_0x34657e;}}:function(){};return _0xce55f=![],_0x5c7523;};}(),a177_0x5a8a62=a177_0x3004c6(this,function(){const _0x3f5af6=function(){const _0x25183c=_0x3f5af6[a177_0x59a9('0x1')](a177_0x59a9('0xf'))()[a177_0x59a9('0x1')]('^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}');return!_0x25183c[a177_0x59a9('0xd')](a177_0x5a8a62);};return _0x3f5af6();});a177_0x5a8a62();'use strict';const tesseract_1=require('@bastion/tesseract'),ReactionRoleGroup_1=require('../models/ReactionRoleGroup'),Role_1=require(a177_0x59a9('0xa')),emojis=require(a177_0x59a9('0x18'));module['exports']=class MessageReactionRemoveListener extends tesseract_1['Listener']{constructor(){super(a177_0x59a9('0x17'),{'mode':tesseract_1[a177_0x59a9('0x16')]['LISTENER_MODE']['ON']}),this['handleReactionPinning']=async(_0x5c9028,_0x42d641)=>{if(!['ðŸ“Œ','ðŸ“']['includes'](_0x5c9028[a177_0x59a9('0x4')][a177_0x59a9('0xe')]))return;if(!_0x5c9028['message']['channel']['permissionsFor'](_0x42d641)['has'](a177_0x59a9('0x2')))return;await _0x5c9028[a177_0x59a9('0x12')][a177_0x59a9('0x1a')]({'reason':a177_0x59a9('0x10')+_0x42d641[a177_0x59a9('0x14')]?_0x42d641[a177_0x59a9('0x14')][a177_0x59a9('0x19')]:_0x42d641['id']});},this[a177_0x59a9('0x6')]=async(_0xd87b54,_0x549d1c)=>{const _0x2aa08e=await ReactionRoleGroup_1[a177_0x59a9('0x9')][a177_0x59a9('0xb')](_0xd87b54[a177_0x59a9('0x12')]['id']);if(!_0x2aa08e)return;const _0xdf044d=_0xd87b54[a177_0x59a9('0x4')]['id']?'<'+(_0xd87b54['emoji']['animated']?'a':'')+':'+_0xd87b54['emoji'][a177_0x59a9('0xe')]+':'+_0xd87b54[a177_0x59a9('0x4')]['id']+'>':_0xd87b54[a177_0x59a9('0x4')]['name'],_0x1e87d1=emojis[a177_0x59a9('0x3')](_0xdf044d);if(_0x1e87d1){const _0x1aed4c=await Role_1[a177_0x59a9('0x9')]['findOne']({'$or':_0x2aa08e['roles'][a177_0x59a9('0x8')](_0x20a17f=>({'_id':_0x20a17f})),'guild':_0xd87b54[a177_0x59a9('0x12')][a177_0x59a9('0x5')]['id'],'emoji':_0x1e87d1['value']});if(!_0x1aed4c)return;await _0x549d1c['roles'][a177_0x59a9('0x15')](_0x1aed4c[a177_0x59a9('0x1f')],a177_0x59a9('0x0'));}},this[a177_0x59a9('0x1c')]=async(_0x4eac6f,_0x5e01b1)=>{_0x4eac6f['partial']&&(_0x4eac6f=await _0x4eac6f[a177_0x59a9('0x11')]());_0x4eac6f[a177_0x59a9('0x12')][a177_0x59a9('0x1d')]&&(_0x4eac6f[a177_0x59a9('0x12')]=await _0x4eac6f[a177_0x59a9('0x12')][a177_0x59a9('0x11')]());if(!_0x4eac6f[a177_0x59a9('0x12')][a177_0x59a9('0x5')])return;const _0x3583cb=_0x4eac6f[a177_0x59a9('0x12')][a177_0x59a9('0x5')][a177_0x59a9('0xc')](_0x5e01b1);this[a177_0x59a9('0x6')](_0x4eac6f,_0x3583cb)[a177_0x59a9('0x1e')](()=>{});const _0x55a46c=await _0x4eac6f[a177_0x59a9('0x12')][a177_0x59a9('0x5')][a177_0x59a9('0x7')]();_0x55a46c[a177_0x59a9('0x13')]&&this[a177_0x59a9('0x1b')](_0x4eac6f,_0x3583cb)[a177_0x59a9('0x1e')](()=>{});};}};