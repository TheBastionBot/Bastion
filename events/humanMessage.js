const a163_0x1021=['has','test','../models/Config','constructor','displayAvatarURL','json','_id','../models/TextChannel','../utils/omnic','replace','multiplier','responseReaction','getString','/chat/instant?message=','cache','return\x20/\x22\x20+\x20this\x20+\x20\x22/','setTimeout','handleDirectMessageRelay','Logger','parse','handleInstantResponses','find','handleLevelRoles','premiumSinceTimestamp','../utils/embeds','../models/Member','fetchApplication','thanks','splice','document','COLORS','indexOf','DEFAUL_CURRENCY_REWARD_MULTIPLIER','content','error','toLowerCase','exec','MAX_LEVEL','handleGamification','filter','../models/Trigger','\x20Trigger','smallestNeighbor','../utils/variables','bastion.name','reply','react','send','updateMany','replaceMessageVariables','makeRequest','recentUsers','handleVotingChannels','parseEmoji','owner','add','IRIS','apply','language','info','keys','gamification','push','../models/Role','trigger','locale','channel','Team','status','getConstant','experience','member','roles','discord.js','exports','findOne','author','computeLevel','messages','handleTriggers','mentions','responseMessage','relayDirectMessages','@bastion/tesseract','save','from','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','floor','size','../utils/numbers','generateEmbed','includes','client','MAX_EXPERIENCE','Constants','catch','level','tag','humanMessage','map','users','random','length','success','get','handleKarma','findById','user','guild','enabled','default','response','ModuleManagerEvent'];(function(_0x2efcce,_0x3931e7){const _0x102134=function(_0x41ab43){while(--_0x41ab43){_0x2efcce['push'](_0x2efcce['shift']());}},_0x2d1654=function(){const _0x185d75={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x3a557a,_0x53634c,_0x4307dc,_0x1e218b){_0x1e218b=_0x1e218b||{};let _0x13a53e=_0x53634c+'='+_0x4307dc,_0x151615=0x0;for(let _0x4e717c=0x0,_0x530d62=_0x3a557a['length'];_0x4e717c<_0x530d62;_0x4e717c++){const _0x490919=_0x3a557a[_0x4e717c];_0x13a53e+=';\x20'+_0x490919;const _0x63060c=_0x3a557a[_0x490919];_0x3a557a['push'](_0x63060c),_0x530d62=_0x3a557a['length'],_0x63060c!==!![]&&(_0x13a53e+='='+_0x63060c);}_0x1e218b['cookie']=_0x13a53e;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2b943f,_0x58655e){_0x2b943f=_0x2b943f||function(_0x1e0971){return _0x1e0971;};const _0x4670f7=_0x2b943f(new RegExp('(?:^|;\x20)'+_0x58655e['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)')),_0x29286b=function(_0x17b11d,_0x393809){_0x17b11d(++_0x393809);};return _0x29286b(_0x102134,_0x3931e7),_0x4670f7?decodeURIComponent(_0x4670f7[0x1]):undefined;}},_0x3ef000=function(){const _0x3877ca=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3877ca['test'](_0x185d75['removeCookie']['toString']());};_0x185d75['updateCookie']=_0x3ef000;let _0x42591f='';const _0x4fac4f=_0x185d75['updateCookie']();if(!_0x4fac4f)_0x185d75['setCookie'](['*'],'counter',0x1);else _0x4fac4f?_0x42591f=_0x185d75['getCookie'](null,'counter'):_0x185d75['removeCookie']();};_0x2d1654();}(a163_0x1021,0xe2));const a163_0x2d16=function(_0x2efcce,_0x3931e7){_0x2efcce=_0x2efcce-0x1b6;let _0x102134=a163_0x1021[_0x2efcce];return _0x102134;};const _0x5ea9f5=a163_0x2d16,a163_0x3ef000=function(){let _0x4fac4f=!![];return function(_0x3a557a,_0x53634c){const _0x4307dc=_0x4fac4f?function(){const _0x20b890=a163_0x2d16;if(_0x53634c){const _0x1e218b=_0x53634c[_0x20b890(0x1ef)](_0x3a557a,arguments);return _0x53634c=null,_0x1e218b;}}:function(){};return _0x4fac4f=![],_0x4307dc;};}(),a163_0x185d75=a163_0x3ef000(this,function(){const _0x13a53e=function(){const _0x28de30=a163_0x2d16,_0x151615=_0x13a53e['constructor'](_0x28de30(0x1c5))()[_0x28de30(0x1b9)](_0x28de30(0x20c));return!_0x151615[_0x28de30(0x1b7)](a163_0x185d75);};return _0x13a53e();});a163_0x185d75();'use strict';const tesseract_1=require(_0x5ea9f5(0x209)),discord_js_1=require(_0x5ea9f5(0x1ff)),embeds=require(_0x5ea9f5(0x1ce)),emojis=require('../utils/emojis'),gamification=require('../utils/gamification'),numbers=require(_0x5ea9f5(0x20f)),omnic=require(_0x5ea9f5(0x1be)),variables=require(_0x5ea9f5(0x1e1)),Config_1=require(_0x5ea9f5(0x1b8)),Member_1=require(_0x5ea9f5(0x1cf)),Role_1=require(_0x5ea9f5(0x1f5)),TextChannel_1=require(_0x5ea9f5(0x1bd)),Trigger_1=require(_0x5ea9f5(0x1de));module[_0x5ea9f5(0x200)]=class HumanMessageEvent extends tesseract_1[_0x5ea9f5(0x226)]{constructor(){const _0x1a0521=_0x5ea9f5;super(_0x1a0521(0x218)),this[_0x1a0521(0x1cc)]=async(_0x4e717c,_0x530d62)=>{const _0xe02e04=_0x1a0521,_0x490919=await Role_1[_0xe02e04(0x224)][_0xe02e04(0x1cb)]({'guild':_0x4e717c[_0xe02e04(0x222)]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x490919||!_0x490919[_0xe02e04(0x21c)])return;const _0x63060c=numbers[_0xe02e04(0x1e0)](_0x530d62,_0x490919[_0xe02e04(0x219)](_0x4670f7=>_0x4670f7[_0xe02e04(0x216)])),_0x2b943f=_0x490919[_0xe02e04(0x1dd)](_0x29286b=>_0x29286b[_0xe02e04(0x216)]!==_0x63060c&&_0x4e717c[_0xe02e04(0x222)][_0xe02e04(0x1fe)][_0xe02e04(0x1c4)][_0xe02e04(0x1b6)](_0x29286b[_0xe02e04(0x1bc)])),_0x58655e=_0x490919[_0xe02e04(0x1dd)](_0x1e0971=>_0x1e0971[_0xe02e04(0x216)]===_0x63060c&&_0x4e717c[_0xe02e04(0x222)]['roles'][_0xe02e04(0x1c4)][_0xe02e04(0x1b6)](_0x1e0971[_0xe02e04(0x1bc)]));_0x58655e[_0xe02e04(0x21c)]&&(await _0x4e717c[_0xe02e04(0x1fd)][_0xe02e04(0x1fe)][_0xe02e04(0x1ed)](_0x58655e[_0xe02e04(0x219)](_0x17b11d=>_0x17b11d[_0xe02e04(0x1bc)])),await _0x4e717c[_0xe02e04(0x1fd)][_0xe02e04(0x1fe)]['remove'](_0x2b943f[_0xe02e04(0x219)](_0x393809=>_0x393809['_id'])));},this[_0x1a0521(0x1dc)]=async _0x3877ca=>{const _0x31d8d6=_0x1a0521,_0x178e76=this[_0x31d8d6(0x1e9)]['get'](_0x3877ca[_0x31d8d6(0x222)]['id'])||[];if(_0x178e76[_0x31d8d6(0x211)](_0x3877ca[_0x31d8d6(0x202)]['id']))return;const _0x1121f0=_0x3877ca[_0x31d8d6(0x212)],_0xe44bd4=_0x3877ca[_0x31d8d6(0x222)],_0x1f7a01=_0x3877ca[_0x31d8d6(0x1fd)];if(!_0xe44bd4[_0x31d8d6(0x1d3)][_0x31d8d6(0x1f3)]||!_0xe44bd4['document'][_0x31d8d6(0x1f3)][_0x31d8d6(0x223)])return;if(_0x1f7a01[_0x31d8d6(0x1d3)][_0x31d8d6(0x216)]>=gamification[_0x31d8d6(0x1db)]||_0x1f7a01[_0x31d8d6(0x1d3)][_0x31d8d6(0x1fc)]>=gamification[_0x31d8d6(0x213)](_0xe44bd4[_0x31d8d6(0x1d3)][_0x31d8d6(0x1f3)][_0x31d8d6(0x1c0)]))return;_0x1f7a01[_0x31d8d6(0x1d3)]['experience']=_0x1f7a01[_0x31d8d6(0x1cd)]?_0x1f7a01[_0x31d8d6(0x1d3)][_0x31d8d6(0x1fc)]+0x2:_0x1f7a01['document'][_0x31d8d6(0x1fc)]+0x1;const _0x3bfe83=gamification[_0x31d8d6(0x203)](_0x1f7a01[_0x31d8d6(0x1d3)][_0x31d8d6(0x1fc)],_0xe44bd4[_0x31d8d6(0x1d3)]['gamification'][_0x31d8d6(0x1c0)]);_0x3bfe83>_0x1f7a01[_0x31d8d6(0x1d3)][_0x31d8d6(0x216)]&&(await _0x1f7a01['credit'](_0x3bfe83*gamification[_0x31d8d6(0x1d6)],'Level-up\x20Reward',_0x1f7a01[_0x31d8d6(0x1d3)]),_0xe44bd4[_0x31d8d6(0x1d3)][_0x31d8d6(0x1f3)][_0x31d8d6(0x204)]&&_0x3877ca[_0x31d8d6(0x1f8)]['send']({'embed':{'color':tesseract_1[_0x31d8d6(0x214)]['COLORS']['IRIS'],'fields':[{'name':'LEVELED\x20UP!','value':_0x1121f0[_0x31d8d6(0x1f7)][_0x31d8d6(0x1c2)](_0xe44bd4['document'][_0x31d8d6(0x1f0)],_0x31d8d6(0x1f1),'levelUp',_0x3877ca[_0x31d8d6(0x202)][_0x31d8d6(0x217)],_0x3bfe83)}]}})[_0x31d8d6(0x215)](()=>{}),this[_0x31d8d6(0x1cc)](_0x3877ca,_0x1f7a01[_0x31d8d6(0x1d3)]['level'])['catch'](tesseract_1['Logger'][_0x31d8d6(0x1d8)])),_0x1f7a01[_0x31d8d6(0x1d3)][_0x31d8d6(0x216)]=_0x3bfe83,await _0x1f7a01[_0x31d8d6(0x1d3)][_0x31d8d6(0x20a)](),_0x178e76[_0x31d8d6(0x1f4)](_0x3877ca[_0x31d8d6(0x202)]['id']),this['recentUsers']['set'](_0x3877ca[_0x31d8d6(0x222)]['id'],_0x178e76),_0x3877ca[_0x31d8d6(0x212)][_0x31d8d6(0x1c6)](()=>{const _0xabe480=_0x31d8d6,_0xf27cda=this['recentUsers'][_0xabe480(0x21e)](_0x3877ca[_0xabe480(0x222)]['id']);_0xf27cda[_0xabe480(0x1d2)](_0xf27cda[_0xabe480(0x1d5)](_0x3877ca['author']['id']),0x1),this[_0xabe480(0x1e9)]['set'](_0x3877ca[_0xabe480(0x222)]['id'],_0xf27cda);},0x32c8);},this[_0x1a0521(0x205)]=async _0x47226f=>{const _0x40e7c9=_0x1a0521;if(!_0x47226f[_0x40e7c9(0x1d7)])return;const _0x2c088f=await Trigger_1[_0x40e7c9(0x224)][_0x40e7c9(0x1cb)]({'guild':_0x47226f[_0x40e7c9(0x222)]['id']}),_0x17e29d=[],_0x5578fb=[];for(const _0xb95bf3 of _0x2c088f){const _0x20baab=new RegExp(_0xb95bf3[_0x40e7c9(0x1f6)][_0x40e7c9(0x1bf)](/\?/g,'.')[_0x40e7c9(0x1bf)](/\*+/g,'.*'),'ig');if(!_0x20baab[_0x40e7c9(0x1b7)](_0x47226f[_0x40e7c9(0x1d7)]))continue;_0xb95bf3['responseMessage']&&_0x17e29d[_0x40e7c9(0x1f4)](_0xb95bf3[_0x40e7c9(0x207)]);if(_0xb95bf3[_0x40e7c9(0x1c1)]){const _0x752dae=emojis[_0x40e7c9(0x1eb)](_0xb95bf3['responseReaction']);_0x752dae&&_0x5578fb[_0x40e7c9(0x1f4)](_0x752dae['reaction']);}}_0x17e29d[_0x40e7c9(0x21c)]&&_0x47226f[_0x40e7c9(0x1f8)]['send']({'embed':{...embeds[_0x40e7c9(0x210)](JSON[_0x40e7c9(0x1c9)](variables[_0x40e7c9(0x1e7)](JSON['stringify'](_0x17e29d[Math[_0x40e7c9(0x20d)](Math['random']()*_0x17e29d[_0x40e7c9(0x21c)])]),_0x47226f))),'footer':{'text':_0x47226f['client'][_0x40e7c9(0x1f7)][_0x40e7c9(0x1fb)](_0x40e7c9(0x1e2))+_0x40e7c9(0x1df)}}})[_0x40e7c9(0x215)](tesseract_1['Logger'][_0x40e7c9(0x1d8)]),_0x5578fb[_0x40e7c9(0x21c)]&&_0x47226f[_0x40e7c9(0x1e4)](_0x5578fb[Math['floor'](Math[_0x40e7c9(0x21b)]()*_0x5578fb[_0x40e7c9(0x21c)])])[_0x40e7c9(0x215)](tesseract_1[_0x40e7c9(0x1c8)]['error']);},this[_0x1a0521(0x1ea)]=async _0x5b570c=>{const _0x40ff41=_0x1a0521,_0x524ff5=await TextChannel_1[_0x40ff41(0x224)][_0x40ff41(0x201)]({'_id':_0x5b570c[_0x40ff41(0x1f8)]['id'],'voting':!![]});if(!_0x524ff5)return;_0x5b570c['react']('ðŸ‘')[_0x40ff41(0x215)](()=>{}),_0x5b570c[_0x40ff41(0x1e4)]('ðŸ‘Ž')[_0x40ff41(0x215)](()=>{});},this[_0x1a0521(0x21f)]=async _0x3dfd8d=>{const _0x40a261=_0x1a0521;if(!_0x3dfd8d[_0x40a261(0x1d7)])return;if((_0x3dfd8d['content'][_0x40a261(0x1d9)]()[_0x40a261(0x211)](_0x40a261(0x1d1))||_0x3dfd8d['content']['toLowerCase']()[_0x40a261(0x211)]('thank\x20you'))&&_0x3dfd8d[_0x40a261(0x206)][_0x40a261(0x21a)]&&_0x3dfd8d[_0x40a261(0x206)]['users'][_0x40a261(0x20e)]){const _0x46aea7=Array[_0x40a261(0x20b)](_0x3dfd8d[_0x40a261(0x206)][_0x40a261(0x21a)][_0x40a261(0x1f2)]())[_0x40a261(0x1dd)](_0x54df87=>_0x54df87!==_0x3dfd8d[_0x40a261(0x1fd)]['id']);await Member_1[_0x40a261(0x224)][_0x40a261(0x1e6)]({'user':{'$in':_0x46aea7},'guild':_0x3dfd8d[_0x40a261(0x222)]['id']},{'$inc':{'karma':0x1}}),_0x3dfd8d[_0x40a261(0x1e4)]('ðŸ†™')[_0x40a261(0x215)](()=>{});}},this[_0x1a0521(0x1ca)]=async _0x378953=>{const _0x2c7fe9=_0x1a0521;if(!_0x378953[_0x2c7fe9(0x1d7)])return;const _0x1b4334=await omnic[_0x2c7fe9(0x1e8)](_0x2c7fe9(0x1c3)+encodeURIComponent(_0x378953[_0x2c7fe9(0x1d7)]))['then'](_0x342f9a=>_0x342f9a[_0x2c7fe9(0x1bb)]());if(_0x1b4334[_0x2c7fe9(0x1fa)]!==_0x2c7fe9(0x21d))return;const _0x4b80a8=_0x1b4334[_0x2c7fe9(0x225)][_0x2c7fe9(0x1e3)]instanceof Array?_0x1b4334['response'][_0x2c7fe9(0x1e3)]:[_0x1b4334[_0x2c7fe9(0x225)]['reply']];for(const _0x3d1070 of _0x4b80a8){await _0x378953['channel'][_0x2c7fe9(0x1e5)](_0x3d1070)[_0x2c7fe9(0x215)](()=>{});}},this[_0x1a0521(0x1c7)]=async _0x46e989=>{const _0x1fb33a=_0x1a0521,_0xbb9871=await Config_1['default'][_0x1fb33a(0x220)](_0x46e989[_0x1fb33a(0x212)]['user']['id']);if(_0xbb9871[_0x1fb33a(0x208)]&&_0x46e989['content']){const _0x2cd0e2=await _0x46e989[_0x1fb33a(0x212)][_0x1fb33a(0x1d0)](),_0x3a37f7=_0x2cd0e2['owner']instanceof discord_js_1[_0x1fb33a(0x1f9)]?_0x2cd0e2['owner'][_0x1fb33a(0x1ec)][_0x1fb33a(0x221)]:_0x2cd0e2[_0x1fb33a(0x1ec)];if(_0x46e989[_0x1fb33a(0x202)]['id']===_0x3a37f7['id'])return;const _0x167bc8=await _0x3a37f7['createDM']();await _0x167bc8['send']({'embed':{'color':tesseract_1['Constants'][_0x1fb33a(0x1d4)][_0x1fb33a(0x1ee)],'author':{'name':_0x46e989[_0x1fb33a(0x202)]['tag'],'iconURL':_0x46e989[_0x1fb33a(0x202)][_0x1fb33a(0x1ba)]({'dynamic':!![],'size':0x40})},'description':_0x46e989[_0x1fb33a(0x1d7)],'footer':{'text':_0x46e989[_0x1fb33a(0x202)]['id']}}});}},this[_0x1a0521(0x1da)]=async _0x5c91ad=>{const _0x2bd184=_0x1a0521;_0x5c91ad[_0x2bd184(0x222)]?(this[_0x2bd184(0x1dc)](_0x5c91ad)[_0x2bd184(0x215)](()=>{}),this[_0x2bd184(0x205)](_0x5c91ad)[_0x2bd184(0x215)](()=>{}),this[_0x2bd184(0x21f)](_0x5c91ad)[_0x2bd184(0x215)](tesseract_1[_0x2bd184(0x1c8)]['error']),this['handleVotingChannels'](_0x5c91ad)['catch'](()=>{})):(this[_0x2bd184(0x1ca)](_0x5c91ad)[_0x2bd184(0x215)](()=>{}),this['handleDirectMessageRelay'](_0x5c91ad)[_0x2bd184(0x215)](()=>{}));},this['recentUsers']=new Map();}};